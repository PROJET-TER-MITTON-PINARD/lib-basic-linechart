import { Injectable } from '@angular/core';
import { parseBool } from './basic-linechart.component';
import { str } from './data';
import * as i0 from "@angular/core";
export class DataService {
    constructor() {
        this.str = str;
        this.dataExample1 = [];
        this.dataExample2 = [];
        this.dataExample3 = [];
        this.dataExample4 = [];
        this.dataExample5 = [];
        this.dataExample6 = [];
        this.dataExample7 = [];
        this.generateData();
    }
    parse(str, sensorId, f) {
        const L = str.trim().split("\n").map(s => s.trim()).filter(s => s !== "")
            .map(s => s.split(";").map(s => s.slice(1, -1)))
            .filter(tab => tab[1] === sensorId)
            .map(([t, id, v]) => ({
            timestamp: (new Date((t.replace(",", "."))).getTime()),
            value: f(v),
            sensorId: id
        }));
        return L;
    }
    generateData() {
        let d1 = this.parse(this.str, "PC6", parseBool);
        let v1 = [];
        d1.forEach(element => v1.push([element.timestamp, element.value]));
        let da1 = {
            label: "PC6",
            values: v1,
            color: "#124568",
            style: "both",
            interpolation: "step"
        };
        let d2 = this.parse(this.str, "PC5", parseBool);
        let v2 = [];
        d2.forEach(element => v2.push([element.timestamp, element.value]));
        let x = 0;
        v2.forEach(element => {
            element[1] = x;
            x = this.getRandomInt(x);
        });
        let da2 = {
            label: "PC5",
            values: v2,
            color: "purple",
            style: "line",
            interpolation: "linear"
        };
        let d3 = this.parse(this.str, "Presence_Salon", parseBool);
        let v3 = [];
        d3.forEach(element => v3.push([element.timestamp, element.value]));
        let da3 = {
            label: "Presence_Salon",
            values: v3,
            color: "pink",
            style: "line",
            interpolation: "step"
        };
        let d4 = this.parse(this.str, "Temperature_Salon", parseFloat);
        let v4 = [];
        d4.forEach(element => v4.push([element.timestamp, element.value]));
        let da4 = {
            label: "Temperature_Salon",
            values: v4,
            color: "purple",
            style: "line",
            interpolation: "linear"
        };
        let d5 = this.parse(this.str, "Temperature_Cuisine", parseFloat);
        let v5 = [];
        d5.forEach(element => v5.push([element.timestamp, element.value]));
        let da5 = {
            label: "Temperature_Cuisine",
            values: v5,
            color: "gold",
            style: "line",
            interpolation: "step"
        };
        let d6 = this.parse(this.str, "Presence_Cuisine", parseBool);
        let v6 = [];
        d6.forEach(element => v6.push([element.timestamp, element.value]));
        let da6 = {
            label: "Presence_Cuisine",
            values: v6,
            color: "purple",
            style: "both",
            interpolation: "step"
        };
        let d7 = this.parse(this.str, "Presence_SDB", parseBool);
        let v7 = [];
        d7.forEach(element => v7.push([element.timestamp, element.value]));
        let da7 = {
            label: "Presence_SDB",
            values: v7,
            color: "black",
            style: "area",
            interpolation: "step"
        };
        this.dataExample2.push(da1);
        this.dataExample1.push(da2);
        this.dataExample4.push(da4);
        this.dataExample3.push(da3);
        this.dataExample3.push(da1);
        this.dataExample5.push(da5);
        this.dataExample6.push(da6);
        this.dataExample7.push(da7);
    }
    getRandomInt(x) {
        let alea;
        if (x == 0) {
            return 1;
        }
        else {
            alea = Math.round(Math.random());
            if (alea == 0) {
                return x - 1;
            }
            else {
                return x + 1;
            }
        }
    }
}
DataService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.0.3", ngImport: i0, type: DataService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });
DataService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.0.3", ngImport: i0, type: DataService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.0.3", ngImport: i0, type: DataService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return []; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaWMtbGluZWNoYXJ0LnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9iYXNpYy1saW5lY2hhcnQvc3JjL2xpYi9iYXNpYy1saW5lY2hhcnQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBUSxTQUFTLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUM5RCxPQUFPLEVBQUMsR0FBRyxFQUFDLE1BQU0sUUFBUSxDQUFDOztBQVkzQixNQUFNLE9BQU8sV0FBVztJQVl0QjtRQVZBLFFBQUcsR0FBVyxHQUFHLENBQUM7UUFFWCxpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUcvQixJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDdEIsQ0FBQztJQUVELEtBQUssQ0FBSSxHQUFXLEVBQUUsUUFBZ0IsRUFBRSxDQUFtQjtRQUV6RCxNQUFNLENBQUMsR0FBa0IsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUcsRUFBRSxDQUFDO2FBRXhFLEdBQUcsQ0FBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFFLENBQUMsQ0FBQyxFQUFF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Q0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDNUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVPLFlBQVksQ0FBQyxDQUFRO1FBQzNCLElBQUksSUFBWSxDQUFDO1FBQ2pCLElBQUcsQ0FBQyxJQUFFLENBQUMsRUFBQztZQUNOLE9BQU8sQ0FBQyxDQUFDO1NBQ1Y7YUFBSTtZQUNILElBQUksR0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO1lBQy9CLElBQUcsSUFBSSxJQUFFLENBQUMsRUFBQztnQkFDVCxPQUFPLENBQUMsR0FBQyxDQUFDLENBQUM7YUFDWjtpQkFBSTtnQkFDSCxPQUFPLENBQUMsR0FBQyxDQUFDLENBQUM7YUFDWjtTQUNGO0lBQ0gsQ0FBQzs7d0dBOUlVLFdBQVc7NEdBQVgsV0FBVyxjQUhWLE1BQU07MkZBR1AsV0FBVztrQkFKdkIsVUFBVTttQkFBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBEYXRhLCBwYXJzZUJvb2wgfSBmcm9tICcuL2Jhc2ljLWxpbmVjaGFydC5jb21wb25lbnQnO1xuaW1wb3J0IHtzdHJ9IGZyb20gJy4vZGF0YSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgREFUQTxUPntcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIHZhbHVlOiBUO1xuICBzZW5zb3JJZDogc3RyaW5nO1xufVxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcblxuZXhwb3J0IGNsYXNzIERhdGFTZXJ2aWNlIHtcblxuICBzdHI6IHN0cmluZyA9IHN0cjtcblxuICBwdWJsaWMgZGF0YUV4YW1wbGUxOiBEYXRhW10gPSBbXTsgXG4gIHB1YmxpYyBkYXRhRXhhbXBsZTI6IERhdGFbXSA9IFtdO1xuICBwdWJsaWMgZGF0YUV4YW1wbGUzOiBEYXRhW10gPSBbXTtcbiAgcHVibGljIGRhdGFFeGFtcGxlNDogRGF0YVtdID0gW107XG4gIHB1YmxpYyBkYXRhRXhhbXBsZTU6IERhdGFbXSA9IFtdO1xuICBwdWJsaWMgZGF0YUV4YW1wbGU2OiBEYXRhW10gPSBbXTtcbiAgcHVibGljIGRhdGFFeGFtcGxlNzogRGF0YVtdID0gW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5nZW5lcmF0ZURhdGEoKTtcbiAgfVxuXG4gIHBhcnNlPFQ+KHN0cjogc3RyaW5nLCBzZW5zb3JJZDogc3RyaW5nLCBmOiAoczogc3RyaW5nKSA9PiBUKTogREFUQTxUPltdIHtcblxuICAgIGNvbnN0IEw6IERBVEEgPCBUID4gW10gPSBzdHIudHJpbSgpLnNwbGl0KFwiXFxuXCIpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIocyA9PiBzIT09XCJcIilcblxuICAgICAgICAgICAgICAgICAubWFwKCBzID0+IHMuc3BsaXQoXCI7XCIpLm1hcCggcyA9PiBzLnNsaWNlKDEsIC0xKSApIClcblxuICAgICAgICAgICAgICAgICAuZmlsdGVyKCB0YWIgPT4gdGFiWzFdID09PSBzZW5zb3JJZCApXG5cbiAgICAgICAgICAgICAgICAgLm1hcCggKFt0LCBpZCwgdl0pID0+ICh7XG5cbiAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogKG5ldyBEYXRlKCh0LnJlcGxhY2UoXCIsXCIsIFwiLlwiKSkpLmdldFRpbWUoKSksXG5cbiAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmKHYpLFxuXG4gICAgICAgICAgICAgICAgICAgICBzZW5zb3JJZDogaWRcblxuICAgICAgICAgICAgICAgICB9KSk7XG4gICAgcmV0dXJuIEw7XG5cbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVEYXRhKCl7XG4gICAgbGV0IGQxOiBEQVRBPG51bWJlcj5bXSA9IHRoaXMucGFyc2U8bnVtYmVyPih0aGlzLnN0cixcIlBDNlwiLCBwYXJzZUJvb2wpO1xuICAgIGxldCB2MTogW251bWJlcixudW1iZXJdW10gPSBbXTtcbiAgICBkMS5mb3JFYWNoKGVsZW1lbnQgPT52MS5wdXNoKFtlbGVtZW50LnRpbWVzdGFtcCxlbGVtZW50LnZhbHVlXSkpO1xuICAgIGxldCBkYTE6IERhdGEgPSB7XG4gICAgICBsYWJlbDogXCJQQzZcIixcbiAgICAgIHZhbHVlczogdjEsXG4gICAgICBjb2xvcjogXCIjMTI0NTY4XCIsXG4gICAgICBzdHlsZTogXCJib3RoXCIsXG4gICAgICBpbnRlcnBvbGF0aW9uOiBcInN0ZXBcIlxuICAgIH1cbiAgICBsZXQgZDI6IERBVEE8bnVtYmVyPltdID0gdGhpcy5wYXJzZTxudW1iZXI+KHRoaXMuc3RyLFwiUEM1XCIsIHBhcnNlQm9vbCk7XG4gICAgbGV0IHYyOiBbbnVtYmVyLG51bWJlcl1bXSA9IFtdO1xuICAgIGQyLmZvckVhY2goZWxlbWVudCA9PnYyLnB1c2goW2VsZW1lbnQudGltZXN0YW1wLGVsZW1lbnQudmFsdWVdKSk7XG4gICAgbGV0IHg6bnVtYmVyID0gMDtcbiAgICB2Mi5mb3JFYWNoKGVsZW1lbnQ9PiB7XG4gICAgICBlbGVtZW50WzFdPXg7XG4gICAgICB4PXRoaXMuZ2V0UmFuZG9tSW50KHgpO1xuICAgIH1cbiAgICAgICk7XG4gICAgbGV0IGRhMjogRGF0YSA9IHtcbiAgICAgIGxhYmVsOiBcIlBDNVwiLFxuICAgICAgdmFsdWVzOiB2MixcbiAgICAgIGNvbG9yOiBcInB1cnBsZVwiLFxuICAgICAgc3R5bGU6IFwibGluZVwiLFxuICAgICAgaW50ZXJwb2xhdGlvbjogXCJsaW5lYXJcIlxuICAgIH1cbiAgICBsZXQgZDM6IERBVEE8bnVtYmVyPltdID0gdGhpcy5wYXJzZTxudW1iZXI+KHRoaXMuc3RyLFwiUHJlc2VuY2VfU2Fsb25cIiwgcGFyc2VCb29sKTtcbiAgICBsZXQgdjM6IFtudW1iZXIsbnVtYmVyXVtdID0gW107XG4gICAgZDMuZm9yRWFjaChlbGVtZW50ID0+djMucHVzaChbZWxlbWVudC50aW1lc3RhbXAsZWxlbWVudC52YWx1ZV0pKTtcbiAgICBsZXQgZGEzOiBEYXRhID0ge1xuICAgICAgbGFiZWw6IFwiUHJlc2VuY2VfU2Fsb25cIixcbiAgICAgIHZhbHVlczogdjMsXG4gICAgICBjb2xvcjogXCJwaW5rXCIsXG4gICAgICBzdHlsZTogXCJsaW5lXCIsXG4gICAgICBpbnRlcnBvbGF0aW9uOiBcInN0ZXBcIlxuICAgIH1cblxuICAgIGxldCBkNDogREFUQTxudW1iZXI+W10gPSB0aGlzLnBhcnNlPG51bWJlcj4odGhpcy5zdHIsXCJUZW1wZXJhdHVyZV9TYWxvblwiLCAgcGFyc2VGbG9hdCk7XG4gICAgbGV0IHY0OiBbbnVtYmVyLG51bWJlcl1bXSA9IFtdO1xuICAgIGQ0LmZvckVhY2goZWxlbWVudCA9PnY0LnB1c2goW2VsZW1lbnQudGltZXN0YW1wLGVsZW1lbnQudmFsdWVdKSk7XG4gICAgbGV0IGRhNDogRGF0YSA9IHtcbiAgICAgIGxhYmVsOiBcIlRlbXBlcmF0dXJlX1NhbG9uXCIsXG4gICAgICB2YWx1ZXM6IHY0LFxuICAgICAgY29sb3I6IFwicHVycGxlXCIsXG4gICAgICBzdHlsZTogXCJsaW5lXCIsXG4gICAgICBpbnRlcnBvbGF0aW9uOiBcImxpbmVhclwiXG4gICAgfVxuXG4gICAgbGV0IGQ1OiBEQVRBPG51bWJlcj5bXSA9IHRoaXMucGFyc2U8bnVtYmVyPih0aGlzLnN0cixcIlRlbXBlcmF0dXJlX0N1aXNpbmVcIiwgIHBhcnNlRmxvYXQpO1xuICAgIGxldCB2NTogW251bWJlcixudW1iZXJdW10gPSBbXTtcbiAgICBkNS5mb3JFYWNoKGVsZW1lbnQgPT52NS5wdXNoKFtlbGVtZW50LnRpbWVzdGFtcCxlbGVtZW50LnZhbHVlXSkpO1xuICAgIGxldCBkYTU6IERhdGEgPSB7XG4gICAgICBsYWJlbDogXCJUZW1wZXJhdHVyZV9DdWlzaW5lXCIsXG4gICAgICB2YWx1ZXM6IHY1LFxuICAgICAgY29sb3I6IFwiZ29sZFwiLFxuICAgICAgc3R5bGU6IFwibGluZVwiLFxuICAgICAgaW50ZXJwb2xhdGlvbjogXCJzdGVwXCJcbiAgICB9XG5cbiAgICBsZXQgZDY6IERBVEE8bnVtYmVyPltdID0gdGhpcy5wYXJzZTxudW1iZXI+KHRoaXMuc3RyLFwiUHJlc2VuY2VfQ3Vpc2luZVwiLCAgcGFyc2VCb29sKTtcbiAgICBsZXQgdjY6IFtudW1iZXIsbnVtYmVyXVtdID0gW107XG4gICAgZDYuZm9yRWFjaChlbGVtZW50ID0+djYucHVzaChbZWxlbWVudC50aW1lc3RhbXAsZWxlbWVudC52YWx1ZV0pKTtcbiAgICBsZXQgZGE2OiBEYXRhID0ge1xuICAgICAgbGFiZWw6IFwiUHJlc2VuY2VfQ3Vpc2luZVwiLFxuICAgICAgdmFsdWVzOiB2NixcbiAgICAgIGNvbG9yOiBcInB1cnBsZVwiLFxuICAgICAgc3R5bGU6IFwiYm90aFwiLFxuICAgICAgaW50ZXJwb2xhdGlvbjogXCJzdGVwXCJcbiAgICB9XG5cbiAgICBsZXQgZDc6IERBVEE8bnVtYmVyPltdID0gdGhpcy5wYXJzZTxudW1iZXI+KHRoaXMuc3RyLFwiUHJlc2VuY2VfU0RCXCIsICBwYXJzZUJvb2wpO1xuICAgIGxldCB2NzogW251bWJlcixudW1iZXJdW10gPSBbXTtcbiAgICBkNy5mb3JFYWNoKGVsZW1lbnQgPT52Ny5wdXNoKFtlbGVtZW50LnRpbWVzdGFtcCxlbGVtZW50LnZhbHVlXSkpO1xuICAgIGxldCBkYTc6IERhdGEgPSB7XG4gICAgICBsYWJlbDogXCJQcmVzZW5jZV9TREJcIixcbiAgICAgIHZhbHVlczogdjcsXG4gICAgICBjb2xvcjogXCJibGFja1wiLFxuICAgICAgc3R5bGU6IFwiYXJlYVwiLFxuICAgICAgaW50ZXJwb2xhdGlvbjogXCJzdGVwXCJcbiAgICB9XG4gICAgXG4gICAgXG4gICAgdGhpcy5kYXRhRXhhbXBsZTIucHVzaChkYTEpO1xuICAgIHRoaXMuZGF0YUV4YW1wbGUxLnB1c2goZGEyKTtcbiAgICB0aGlzLmRhdGFFeGFtcGxlNC5wdXNoKGRhNCk7XG4gICAgdGhpcy5kYXRhRXhhbXBsZTMucHVzaChkYTMpO1xuICAgIHRoaXMuZGF0YUV4YW1wbGUzLnB1c2goZGExKTtcbiAgICB0aGlzLmRhdGFFeGFtcGxlNS5wdXNoKGRhNSk7XG4gICAgdGhpcy5kYXRhRXhhbXBsZTYucHVzaChkYTYpO1xuICAgIHRoaXMuZGF0YUV4YW1wbGU3LnB1c2goZGE3KTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UmFuZG9tSW50KHg6bnVtYmVyKXtcbiAgICBsZXQgYWxlYTogbnVtYmVyO1xuICAgIGlmKHg9PTApe1xuICAgICAgcmV0dXJuIDE7XG4gICAgfWVsc2V7XG4gICAgICBhbGVhPU1hdGgucm91bmQoTWF0aC5yYW5kb20oKSk7XG4gICAgICBpZihhbGVhPT0wKXtcbiAgICAgICAgcmV0dXJuIHgtMTtcbiAgICAgIH1lbHNle1xuICAgICAgICByZXR1cm4geCsxO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIl19