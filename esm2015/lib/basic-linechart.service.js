import { Injectable } from '@angular/core';
import { parseBool } from './basic-linechart.component';
import { str } from '../data';
import * as i0 from "@angular/core";
export class DataService {
    constructor() {
        this.str = str;
        this.dataExample1 = [];
        this.dataExample2 = [];
        this.dataExample3 = [];
        this.dataExample4 = [];
        this.dataExample5 = [];
        this.dataExample6 = [];
        this.dataExample7 = [];
        this.generateData();
    }
    parse(str, sensorId, f) {
        const L = str.trim().split("\n").map(s => s.trim()).filter(s => s !== "")
            .map(s => s.split(";").map(s => s.slice(1, -1)))
            .filter(tab => tab[1] === sensorId)
            .map(([t, id, v]) => ({
            timestamp: (new Date((t.replace(",", "."))).getTime()),
            value: f(v),
            sensorId: id
        }));
        return L;
    }
    generateData() {
        let d1 = this.parse(this.str, "PC6", parseBool);
        let v1 = [];
        d1.forEach(element => v1.push([element.timestamp, element.value]));
        let da1 = {
            label: "PC6",
            values: v1,
            color: "#124568",
            style: "both",
            interpolation: "step"
        };
        let d2 = this.parse(this.str, "PC5", parseBool);
        let v2 = [];
        d2.forEach(element => v2.push([element.timestamp, element.value]));
        let x = 0;
        v2.forEach(element => {
            element[1] = x;
            x = this.getRandomInt(x);
        });
        let da2 = {
            label: "PC5",
            values: v2,
            color: "purple",
            style: "line",
            interpolation: "linear"
        };
        let d3 = this.parse(this.str, "Presence_Salon", parseBool);
        let v3 = [];
        d3.forEach(element => v3.push([element.timestamp, element.value]));
        let da3 = {
            label: "Presence_Salon",
            values: v3,
            color: "pink",
            style: "line",
            interpolation: "step"
        };
        let d4 = this.parse(this.str, "Temperature_Salon", parseFloat);
        let v4 = [];
        d4.forEach(element => v4.push([element.timestamp, element.value]));
        let da4 = {
            label: "Temperature_Salon",
            values: v4,
            color: "purple",
            style: "line",
            interpolation: "linear"
        };
        let d5 = this.parse(this.str, "Temperature_Cuisine", parseFloat);
        let v5 = [];
        d5.forEach(element => v5.push([element.timestamp, element.value]));
        let da5 = {
            label: "Temperature_Cuisine",
            values: v5,
            color: "gold",
            style: "line",
            interpolation: "step"
        };
        let d6 = this.parse(this.str, "Presence_Cuisine", parseBool);
        let v6 = [];
        d6.forEach(element => v6.push([element.timestamp, element.value]));
        let da6 = {
            label: "Presence_Cuisine",
            values: v6,
            color: "purple",
            style: "both",
            interpolation: "step"
        };
        let d7 = this.parse(this.str, "Presence_SDB", parseBool);
        let v7 = [];
        d7.forEach(element => v7.push([element.timestamp, element.value]));
        let da7 = {
            label: "Presence_SDB",
            values: v7,
            color: "black",
            style: "area",
            interpolation: "step"
        };
        this.dataExample2.push(da1);
        this.dataExample1.push(da2);
        this.dataExample4.push(da4);
        this.dataExample3.push(da3);
        this.dataExample3.push(da1);
        this.dataExample5.push(da5);
        this.dataExample6.push(da6);
        this.dataExample7.push(da7);
    }
    getRandomInt(x) {
        let alea;
        if (x == 0) {
            return 1;
        }
        else {
            alea = Math.round(Math.random());
            if (alea == 0) {
                return x - 1;
            }
            else {
                return x + 1;
            }
        }
    }
}
DataService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.0.3", ngImport: i0, type: DataService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });
DataService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.0.3", ngImport: i0, type: DataService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.0.3", ngImport: i0, type: DataService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return []; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaWMtbGluZWNoYXJ0LnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9iYXNpYy1saW5lY2hhcnQvc3JjL2xpYi9iYXNpYy1saW5lY2hhcnQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBUSxTQUFTLEVBQUUsTUFBTSw2QkFBNkIsQ0FBQztBQUM5RCxPQUFPLEVBQUMsR0FBRyxFQUFDLE1BQU0sU0FBUyxDQUFDOztBQVk1QixNQUFNLE9BQU8sV0FBVztJQVl0QjtRQVZBLFFBQUcsR0FBVyxHQUFHLENBQUM7UUFFWCxpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUcvQixJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDdEIsQ0FBQztJQUVELEtBQUssQ0FBSSxHQUFXLEVBQUUsUUFBZ0IsRUFBRSxDQUFtQjtRQUV6RCxNQUFNLENBQUMsR0FBa0IsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUcsRUFBRSxDQUFDO2FBRXhFLEdBQUcsQ0FBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFFLENBQUMsQ0FBQyxFQUFF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Q0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDNUIsSUFBSSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDOUIsQ0FBQztJQUVPLFlBQVksQ0FBQyxDQUFRO1FBQzNCLElBQUksSUFBWSxDQUFDO1FBQ2pCLElBQUcsQ0FBQyxJQUFFLENBQUMsRUFBQztZQUNOLE9BQU8sQ0FBQyxDQUFDO1NBQ1Y7YUFBSTtZQUNILElBQUksR0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUUsQ0FBQyxDQUFDO1lBQy9CLElBQUcsSUFBSSxJQUFFLENBQUMsRUFBQztnQkFDVCxPQUFPLENBQUMsR0FBQyxDQUFDLENBQUM7YUFDWjtpQkFBSTtnQkFDSCxPQUFPLENBQUMsR0FBQyxDQUFDLENBQUM7YUFDWjtTQUNGO0lBQ0gsQ0FBQzs7d0dBOUlVLFdBQVc7NEdBQVgsV0FBVyxjQUhWLE1BQU07MkZBR1AsV0FBVztrQkFKdkIsVUFBVTttQkFBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBEYXRhLCBwYXJzZUJvb2wgfSBmcm9tICcuL2Jhc2ljLWxpbmVjaGFydC5jb21wb25lbnQnO1xuaW1wb3J0IHtzdHJ9IGZyb20gJy4uL2RhdGEnO1xuXG5leHBvcnQgaW50ZXJmYWNlIERBVEE8VD57XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICB2YWx1ZTogVDtcbiAgc2Vuc29ySWQ6IHN0cmluZztcbn1cblxuQEluamVjdGFibGUoe1xuICBwcm92aWRlZEluOiAncm9vdCdcbn0pXG5cbmV4cG9ydCBjbGFzcyBEYXRhU2VydmljZSB7XG5cbiAgc3RyOiBzdHJpbmcgPSBzdHI7XG5cbiAgcHVibGljIGRhdGFFeGFtcGxlMTogRGF0YVtdID0gW107IFxuICBwdWJsaWMgZGF0YUV4YW1wbGUyOiBEYXRhW10gPSBbXTtcbiAgcHVibGljIGRhdGFFeGFtcGxlMzogRGF0YVtdID0gW107XG4gIHB1YmxpYyBkYXRhRXhhbXBsZTQ6IERhdGFbXSA9IFtdO1xuICBwdWJsaWMgZGF0YUV4YW1wbGU1OiBEYXRhW10gPSBbXTtcbiAgcHVibGljIGRhdGFFeGFtcGxlNjogRGF0YVtdID0gW107XG4gIHB1YmxpYyBkYXRhRXhhbXBsZTc6IERhdGFbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZ2VuZXJhdGVEYXRhKCk7XG4gIH1cblxuICBwYXJzZTxUPihzdHI6IHN0cmluZywgc2Vuc29ySWQ6IHN0cmluZywgZjogKHM6IHN0cmluZykgPT4gVCk6IERBVEE8VD5bXSB7XG5cbiAgICBjb25zdCBMOiBEQVRBIDwgVCA+IFtdID0gc3RyLnRyaW0oKS5zcGxpdChcIlxcblwiKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKHMgPT4gcyE9PVwiXCIpXG5cbiAgICAgICAgICAgICAgICAgLm1hcCggcyA9PiBzLnNwbGl0KFwiO1wiKS5tYXAoIHMgPT4gcy5zbGljZSgxLCAtMSkgKSApXG5cbiAgICAgICAgICAgICAgICAgLmZpbHRlciggdGFiID0+IHRhYlsxXSA9PT0gc2Vuc29ySWQgKVxuXG4gICAgICAgICAgICAgICAgIC5tYXAoIChbdCwgaWQsIHZdKSA9PiAoe1xuXG4gICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IChuZXcgRGF0ZSgodC5yZXBsYWNlKFwiLFwiLCBcIi5cIikpKS5nZXRUaW1lKCkpLFxuXG4gICAgICAgICAgICAgICAgICAgICB2YWx1ZTogZih2KSxcblxuICAgICAgICAgICAgICAgICAgICAgc2Vuc29ySWQ6IGlkXG5cbiAgICAgICAgICAgICAgICAgfSkpO1xuICAgIHJldHVybiBMO1xuXG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlRGF0YSgpe1xuICAgIGxldCBkMTogREFUQTxudW1iZXI+W10gPSB0aGlzLnBhcnNlPG51bWJlcj4odGhpcy5zdHIsXCJQQzZcIiwgcGFyc2VCb29sKTtcbiAgICBsZXQgdjE6IFtudW1iZXIsbnVtYmVyXVtdID0gW107XG4gICAgZDEuZm9yRWFjaChlbGVtZW50ID0+djEucHVzaChbZWxlbWVudC50aW1lc3RhbXAsZWxlbWVudC52YWx1ZV0pKTtcbiAgICBsZXQgZGExOiBEYXRhID0ge1xuICAgICAgbGFiZWw6IFwiUEM2XCIsXG4gICAgICB2YWx1ZXM6IHYxLFxuICAgICAgY29sb3I6IFwiIzEyNDU2OFwiLFxuICAgICAgc3R5bGU6IFwiYm90aFwiLFxuICAgICAgaW50ZXJwb2xhdGlvbjogXCJzdGVwXCJcbiAgICB9XG4gICAgbGV0IGQyOiBEQVRBPG51bWJlcj5bXSA9IHRoaXMucGFyc2U8bnVtYmVyPih0aGlzLnN0cixcIlBDNVwiLCBwYXJzZUJvb2wpO1xuICAgIGxldCB2MjogW251bWJlcixudW1iZXJdW10gPSBbXTtcbiAgICBkMi5mb3JFYWNoKGVsZW1lbnQgPT52Mi5wdXNoKFtlbGVtZW50LnRpbWVzdGFtcCxlbGVtZW50LnZhbHVlXSkpO1xuICAgIGxldCB4Om51bWJlciA9IDA7XG4gICAgdjIuZm9yRWFjaChlbGVtZW50PT4ge1xuICAgICAgZWxlbWVudFsxXT14O1xuICAgICAgeD10aGlzLmdldFJhbmRvbUludCh4KTtcbiAgICB9XG4gICAgICApO1xuICAgIGxldCBkYTI6IERhdGEgPSB7XG4gICAgICBsYWJlbDogXCJQQzVcIixcbiAgICAgIHZhbHVlczogdjIsXG4gICAgICBjb2xvcjogXCJwdXJwbGVcIixcbiAgICAgIHN0eWxlOiBcImxpbmVcIixcbiAgICAgIGludGVycG9sYXRpb246IFwibGluZWFyXCJcbiAgICB9XG4gICAgbGV0IGQzOiBEQVRBPG51bWJlcj5bXSA9IHRoaXMucGFyc2U8bnVtYmVyPih0aGlzLnN0cixcIlByZXNlbmNlX1NhbG9uXCIsIHBhcnNlQm9vbCk7XG4gICAgbGV0IHYzOiBbbnVtYmVyLG51bWJlcl1bXSA9IFtdO1xuICAgIGQzLmZvckVhY2goZWxlbWVudCA9PnYzLnB1c2goW2VsZW1lbnQudGltZXN0YW1wLGVsZW1lbnQudmFsdWVdKSk7XG4gICAgbGV0IGRhMzogRGF0YSA9IHtcbiAgICAgIGxhYmVsOiBcIlByZXNlbmNlX1NhbG9uXCIsXG4gICAgICB2YWx1ZXM6IHYzLFxuICAgICAgY29sb3I6IFwicGlua1wiLFxuICAgICAgc3R5bGU6IFwibGluZVwiLFxuICAgICAgaW50ZXJwb2xhdGlvbjogXCJzdGVwXCJcbiAgICB9XG5cbiAgICBsZXQgZDQ6IERBVEE8bnVtYmVyPltdID0gdGhpcy5wYXJzZTxudW1iZXI+KHRoaXMuc3RyLFwiVGVtcGVyYXR1cmVfU2Fsb25cIiwgIHBhcnNlRmxvYXQpO1xuICAgIGxldCB2NDogW251bWJlcixudW1iZXJdW10gPSBbXTtcbiAgICBkNC5mb3JFYWNoKGVsZW1lbnQgPT52NC5wdXNoKFtlbGVtZW50LnRpbWVzdGFtcCxlbGVtZW50LnZhbHVlXSkpO1xuICAgIGxldCBkYTQ6IERhdGEgPSB7XG4gICAgICBsYWJlbDogXCJUZW1wZXJhdHVyZV9TYWxvblwiLFxuICAgICAgdmFsdWVzOiB2NCxcbiAgICAgIGNvbG9yOiBcInB1cnBsZVwiLFxuICAgICAgc3R5bGU6IFwibGluZVwiLFxuICAgICAgaW50ZXJwb2xhdGlvbjogXCJsaW5lYXJcIlxuICAgIH1cblxuICAgIGxldCBkNTogREFUQTxudW1iZXI+W10gPSB0aGlzLnBhcnNlPG51bWJlcj4odGhpcy5zdHIsXCJUZW1wZXJhdHVyZV9DdWlzaW5lXCIsICBwYXJzZUZsb2F0KTtcbiAgICBsZXQgdjU6IFtudW1iZXIsbnVtYmVyXVtdID0gW107XG4gICAgZDUuZm9yRWFjaChlbGVtZW50ID0+djUucHVzaChbZWxlbWVudC50aW1lc3RhbXAsZWxlbWVudC52YWx1ZV0pKTtcbiAgICBsZXQgZGE1OiBEYXRhID0ge1xuICAgICAgbGFiZWw6IFwiVGVtcGVyYXR1cmVfQ3Vpc2luZVwiLFxuICAgICAgdmFsdWVzOiB2NSxcbiAgICAgIGNvbG9yOiBcImdvbGRcIixcbiAgICAgIHN0eWxlOiBcImxpbmVcIixcbiAgICAgIGludGVycG9sYXRpb246IFwic3RlcFwiXG4gICAgfVxuXG4gICAgbGV0IGQ2OiBEQVRBPG51bWJlcj5bXSA9IHRoaXMucGFyc2U8bnVtYmVyPih0aGlzLnN0cixcIlByZXNlbmNlX0N1aXNpbmVcIiwgIHBhcnNlQm9vbCk7XG4gICAgbGV0IHY2OiBbbnVtYmVyLG51bWJlcl1bXSA9IFtdO1xuICAgIGQ2LmZvckVhY2goZWxlbWVudCA9PnY2LnB1c2goW2VsZW1lbnQudGltZXN0YW1wLGVsZW1lbnQudmFsdWVdKSk7XG4gICAgbGV0IGRhNjogRGF0YSA9IHtcbiAgICAgIGxhYmVsOiBcIlByZXNlbmNlX0N1aXNpbmVcIixcbiAgICAgIHZhbHVlczogdjYsXG4gICAgICBjb2xvcjogXCJwdXJwbGVcIixcbiAgICAgIHN0eWxlOiBcImJvdGhcIixcbiAgICAgIGludGVycG9sYXRpb246IFwic3RlcFwiXG4gICAgfVxuXG4gICAgbGV0IGQ3OiBEQVRBPG51bWJlcj5bXSA9IHRoaXMucGFyc2U8bnVtYmVyPih0aGlzLnN0cixcIlByZXNlbmNlX1NEQlwiLCAgcGFyc2VCb29sKTtcbiAgICBsZXQgdjc6IFtudW1iZXIsbnVtYmVyXVtdID0gW107XG4gICAgZDcuZm9yRWFjaChlbGVtZW50ID0+djcucHVzaChbZWxlbWVudC50aW1lc3RhbXAsZWxlbWVudC52YWx1ZV0pKTtcbiAgICBsZXQgZGE3OiBEYXRhID0ge1xuICAgICAgbGFiZWw6IFwiUHJlc2VuY2VfU0RCXCIsXG4gICAgICB2YWx1ZXM6IHY3LFxuICAgICAgY29sb3I6IFwiYmxhY2tcIixcbiAgICAgIHN0eWxlOiBcImFyZWFcIixcbiAgICAgIGludGVycG9sYXRpb246IFwic3RlcFwiXG4gICAgfVxuICAgIFxuICAgIFxuICAgIHRoaXMuZGF0YUV4YW1wbGUyLnB1c2goZGExKTtcbiAgICB0aGlzLmRhdGFFeGFtcGxlMS5wdXNoKGRhMik7XG4gICAgdGhpcy5kYXRhRXhhbXBsZTQucHVzaChkYTQpO1xuICAgIHRoaXMuZGF0YUV4YW1wbGUzLnB1c2goZGEzKTtcbiAgICB0aGlzLmRhdGFFeGFtcGxlMy5wdXNoKGRhMSk7XG4gICAgdGhpcy5kYXRhRXhhbXBsZTUucHVzaChkYTUpO1xuICAgIHRoaXMuZGF0YUV4YW1wbGU2LnB1c2goZGE2KTtcbiAgICB0aGlzLmRhdGFFeGFtcGxlNy5wdXNoKGRhNyk7XG4gIH1cblxuICBwcml2YXRlIGdldFJhbmRvbUludCh4Om51bWJlcil7XG4gICAgbGV0IGFsZWE6IG51bWJlcjtcbiAgICBpZih4PT0wKXtcbiAgICAgIHJldHVybiAxO1xuICAgIH1lbHNle1xuICAgICAgYWxlYT1NYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpO1xuICAgICAgaWYoYWxlYT09MCl7XG4gICAgICAgIHJldHVybiB4LTE7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgcmV0dXJuIHgrMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ==