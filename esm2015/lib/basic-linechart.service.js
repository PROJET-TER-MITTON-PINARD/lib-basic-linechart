import { Injectable } from '@angular/core';
import * as i0 from "@angular/core";
export class DataService {
    constructor() {
        this.str = `  
  "2016-07-25 15:47:24,459";"PC6";"OFF"
  "2016-07-25 19:47:24,459";"PC6";"ON"
  "2016-07-26 05:47:24,459";"PC6";"OFF"
  "2016-07-26 06:47:24,459";"PC6";"ON"
  "2016-07-26 06:59:24,459";"PC6";"OFF"
  "2016-07-26 18:21:24,459";"PC6";"ON"
  "2016-07-27 11:00:24,459";"PC6";"OFF"
  "2016-07-28 08:32:24,459";"PC6";"ON"
  "2016-07-28 18:15:24,459";"PC6";"OFF"
  "2016-07-29 09:06:24,459";"PC6";"ON"
  "2016-07-29 19:36:24,459";"PC6";"OFF"
  "2016-07-25 15:47:24,459";"PC5";"OFF"
  "2016-07-25 22:47:24,459";"PC5";"ON"
  "2016-07-25 22:55:24,459";"PC5";"OFF"
  "2016-07-26 07:29:24,459";"PC5";"ON"
  "2016-07-26 20:59:24,459";"PC5";"OFF"
  "2016-07-27 06:21:24,459";"PC5";"ON"
  "2016-07-27 13:00:24,459";"PC5";"OFF"
  "2016-07-28 06:32:24,459";"PC5";"ON"
  "2016-07-28 14:15:24,459";"PC5";"OFF"
  "2016-07-29 06:06:24,459";"PC5";"ON"
  "2016-07-29 19:36:24,459";"PC5";"OFF"
  "2016-07-25 15:47:19,423";"Temperature_Cuisine";"26.7"
  "2016-07-25 15:48:20,279";"Temperature_Cuisine";"26.740000000000002"
  "2016-07-25 15:50:00,776";"Temperature_Cuisine";"26.76"
  "2016-07-25 15:55:00,275";"Temperature_Cuisine";"26.72"
  "2016-07-25 16:10:00,202";"Temperature_Cuisine";"26.68"
  "2016-07-25 16:15:00,197";"Temperature_Cuisine";"26.64"
  "2016-07-25 16:24:50,493";"Temperature_Cuisine";"26.560000000000002"
  "2016-07-25 16:29:50,204";"Temperature_Cuisine";"26.5"
  "2016-07-25 16:34:50,177";"Temperature_Cuisine";"26.46"
  "2016-07-25 16:39:50,128";"Temperature_Cuisine";"26.5"
  "2016-07-25 16:44:50,065";"Temperature_Cuisine";"26.52"
  "2016-07-25 15:47:19,423";"Temperature_Salon";"26.34"
  "2016-07-25 15:48:05,264";"Temperature_Salon";"26.38"
  "2016-07-25 15:53:05,275";"Temperature_Salon";"26.36"
  "2016-07-25 15:58:05,252";"Temperature_Salon";"26.34"
  "2016-07-25 16:08:05,234";"Temperature_Salon";"26.32"
  "2016-07-25 16:13:05,237";"Temperature_Salon";"26.28"
  "2016-07-25 16:23:05,172";"Temperature_Salon";"26.22"
  "2016-07-25 16:28:05,244";"Temperature_Salon";"26.16"
  "2016-07-25 16:29:55,490";"Temperature_Salon";"26.14"
  "2016-07-25 15:47:19,423";"PC3";"ON"
  "2016-07-25 15:48:20,279";"PC3";"OFF"
  "2016-07-25 15:50:00,776";"PC3";"ON"
  "2016-07-25 15:55:00,275";"PC3";"OFF"
  "2016-07-25 16:10:00,202";"PC3";"ON"
  "2016-07-25 16:15:00,197";"PC3";"OFF"
  "2016-07-25 16:24:50,493";"PC3";"ON"
  "2016-07-25 16:29:50,204";"PC3";"OFF"
  "2016-07-25 16:34:50,177";"PC3";"ON"
  "2016-07-25 16:39:50,128";"PC3";"OFF"
  "2016-07-25 16:44:50,065";"PC3";"ON"
  `;
        this.dataExample1 = [];
        this.dataExample2 = [];
        this.dataExample3 = [];
        this.dataExample4 = [];
        this.dataExample5 = [];
        this.dataExample6 = [];
        this.generateExample(this.str);
    }
    parse(str, sensorId, f) {
        const L = str.trim().split("\n").map(s => s.trim()).filter(s => s !== "")
            .map(s => s.split(";").map(s => s.slice(1, -1)))
            .filter(tab => tab[1] === sensorId)
            .map(([t, id, v]) => ({
            timestamp: (new Date((t.replace(",", "."))).getTime()),
            value: f(v),
            sensorId: id
        }));
        return L;
    }
    generateData(str, label, color, style, interpolation, f) {
        let d = this.parse(str, label, f);
        let v = [];
        d.forEach(element => v.push([element.timestamp, element.value]));
        let da = {
            label: label,
            values: v,
            color: color,
            style: style,
            interpolation: interpolation
        };
        return da;
    }
    parseBool(s) {
        if (s == 'ON')
            return 1;
        else if (s == 'OFF')
            return 0;
        else
            return -1;
    }
    generateExample(str) {
        let d2 = this.parse(str, "PC5", this.parseBool);
        let v2 = [];
        d2.forEach(element => v2.push([element.timestamp, element.value]));
        let x = 0;
        v2.forEach(element => {
            element[1] = x;
            x = this.getRandomInt(x);
        });
        let da2 = {
            label: "PC4",
            values: v2,
            color: "purple",
            style: "line",
            interpolation: "linear"
        };
        this.dataExample2.push(this.generateData(str, "PC6", "#124568", "both", "step", this.parseBool));
        this.dataExample1.push(da2);
        this.dataExample4.push(this.generateData(str, "Temperature_Salon", "purple", "line", "linear", parseFloat));
        this.dataExample3.push(this.generateData(str, "PC5", "pink", "line", "step", this.parseBool));
        this.dataExample3.push(this.generateData(str, "PC6", "#124568", "both", "step", this.parseBool));
        this.dataExample5.push(this.generateData(str, "Temperature_Cuisine", "gold", "line", "step", parseFloat));
        this.dataExample6.push(this.generateData(str, "PC3", "green", "both", "step", this.parseBool));
    }
    getRandomInt(x) {
        let alea;
        if (x == 0) {
            return 1;
        }
        else {
            alea = Math.round(Math.random());
            if (alea == 0) {
                return x - 1;
            }
            else {
                return x + 1;
            }
        }
    }
}
DataService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.0.3", ngImport: i0, type: DataService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });
DataService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.0.3", ngImport: i0, type: DataService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.0.3", ngImport: i0, type: DataService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return []; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaWMtbGluZWNoYXJ0LnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9iYXNpYy1saW5lY2hhcnQvc3JjL2xpYi9iYXNpYy1saW5lY2hhcnQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDOztBQWMzQyxNQUFNLE9BQU8sV0FBVztJQWlFdEI7UUEvRFEsUUFBRyxHQUFXOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0FzRHJCLENBQUM7UUFFSyxpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUcvQixJQUFJLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNqQyxDQUFDO0lBRU8sS0FBSyxDQUFJLEdBQVcsRUFBRSxRQUFnQixFQUFFLENBQW1CO1FBRWpFLE1BQU0sQ0FBQyxHQUFrQixHQUFHLENBQUMsSUFBSSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBRyxFQUFFLENBQUM7YUFFeEUsR0FBRyxDQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsRUFB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QUFPLENBQUMsR0FBQyxDQUFDLENBQUM7YUFDWjtTQUNGO0lBQ0gsQ0FBQzs7d0dBckpVLFdBQVc7NEdBQVgsV0FBVyxjQUhWLE1BQU07MkZBR1AsV0FBVztrQkFKdkIsVUFBVTttQkFBQztvQkFDVixVQUFVLEVBQUUsTUFBTTtpQkFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbmplY3RhYmxlIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBEYXRhIH0gZnJvbSAnLi9iYXNpYy1saW5lY2hhcnQuY29tcG9uZW50JztcblxuXG5pbnRlcmZhY2UgREFUQTxUPntcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIHZhbHVlOiBUO1xuICBzZW5zb3JJZDogc3RyaW5nO1xufVxuXG5ASW5qZWN0YWJsZSh7XG4gIHByb3ZpZGVkSW46ICdyb290J1xufSlcblxuZXhwb3J0IGNsYXNzIERhdGFTZXJ2aWNlIHtcblxuICBwcml2YXRlIHN0cjogc3RyaW5nID0gYCAgXG4gIFwiMjAxNi0wNy0yNSAxNTo0NzoyNCw0NTlcIjtcIlBDNlwiO1wiT0ZGXCJcbiAgXCIyMDE2LTA3LTI1IDE5OjQ3OjI0LDQ1OVwiO1wiUEM2XCI7XCJPTlwiXG4gIFwiMjAxNi0wNy0yNiAwNTo0NzoyNCw0NTlcIjtcIlBDNlwiO1wiT0ZGXCJcbiAgXCIyMDE2LTA3LTI2IDA2OjQ3OjI0LDQ1OVwiO1wiUEM2XCI7XCJPTlwiXG4gIFwiMjAxNi0wNy0yNiAwNjo1OToyNCw0NTlcIjtcIlBDNlwiO1wiT0ZGXCJcbiAgXCIyMDE2LTA3LTI2IDE4OjIxOjI0LDQ1OVwiO1wiUEM2XCI7XCJPTlwiXG4gIFwiMjAxNi0wNy0yNyAxMTowMDoyNCw0NTlcIjtcIlBDNlwiO1wiT0ZGXCJcbiAgXCIyMDE2LTA3LTI4IDA4OjMyOjI0LDQ1OVwiO1wiUEM2XCI7XCJPTlwiXG4gIFwiMjAxNi0wNy0yOCAxODoxNToyNCw0NTlcIjtcIlBDNlwiO1wiT0ZGXCJcbiAgXCIyMDE2LTA3LTI5IDA5OjA2OjI0LDQ1OVwiO1wiUEM2XCI7XCJPTlwiXG4gIFwiMjAxNi0wNy0yOSAxOTozNjoyNCw0NTlcIjtcIlBDNlwiO1wiT0ZGXCJcbiAgXCIyMDE2LTA3LTI1IDE1OjQ3OjI0LDQ1OVwiO1wiUEM1XCI7XCJPRkZcIlxuICBcIjIwMTYtMDctMjUgMjI6NDc6MjQsNDU5XCI7XCJQQzVcIjtcIk9OXCJcbiAgXCIyMDE2LTA3LTI1IDIyOjU1OjI0LDQ1OVwiO1wiUEM1XCI7XCJPRkZcIlxuICBcIjIwMTYtMDctMjYgMDc6Mjk6MjQsNDU5XCI7XCJQQzVcIjtcIk9OXCJcbiAgXCIyMDE2LTA3LTI2IDIwOjU5OjI0LDQ1OVwiO1wiUEM1XCI7XCJPRkZcIlxuICBcIjIwMTYtMDctMjcgMDY6MjE6MjQsNDU5XCI7XCJQQzVcIjtcIk9OXCJcbiAgXCIyMDE2LTA3LTI3IDEzOjAwOjI0LDQ1OVwiO1wiUEM1XCI7XCJPRkZcIlxuICBcIjIwMTYtMDctMjggMDY6MzI6MjQsNDU5XCI7XCJQQzVcIjtcIk9OXCJcbiAgXCIyMDE2LTA3LTI4IDE0OjE1OjI0LDQ1OVwiO1wiUEM1XCI7XCJPRkZcIlxuICBcIjIwMTYtMDctMjkgMDY6MDY6MjQsNDU5XCI7XCJQQzVcIjtcIk9OXCJcbiAgXCIyMDE2LTA3LTI5IDE5OjM2OjI0LDQ1OVwiO1wiUEM1XCI7XCJPRkZcIlxuICBcIjIwMTYtMDctMjUgMTU6NDc6MTksNDIzXCI7XCJUZW1wZXJhdHVyZV9DdWlzaW5lXCI7XCIyNi43XCJcbiAgXCIyMDE2LTA3LTI1IDE1OjQ4OjIwLDI3OVwiO1wiVGVtcGVyYXR1cmVfQ3Vpc2luZVwiO1wiMjYuNzQwMDAwMDAwMDAwMDAyXCJcbiAgXCIyMDE2LTA3LTI1IDE1OjUwOjAwLDc3NlwiO1wiVGVtcGVyYXR1cmVfQ3Vpc2luZVwiO1wiMjYuNzZcIlxuICBcIjIwMTYtMDctMjUgMTU6NTU6MDAsMjc1XCI7XCJUZW1wZXJhdHVyZV9DdWlzaW5lXCI7XCIyNi43MlwiXG4gIFwiMjAxNi0wNy0yNSAxNjoxMDowMCwyMDJcIjtcIlRlbXBlcmF0dXJlX0N1aXNpbmVcIjtcIjI2LjY4XCJcbiAgXCIyMDE2LTA3LTI1IDE2OjE1OjAwLDE5N1wiO1wiVGVtcGVyYXR1cmVfQ3Vpc2luZVwiO1wiMjYuNjRcIlxuICBcIjIwMTYtMDctMjUgMTY6MjQ6NTAsNDkzXCI7XCJUZW1wZXJhdHVyZV9DdWlzaW5lXCI7XCIyNi41NjAwMDAwMDAwMDAwMDJcIlxuICBcIjIwMTYtMDctMjUgMTY6Mjk6NTAsMjA0XCI7XCJUZW1wZXJhdHVyZV9DdWlzaW5lXCI7XCIyNi41XCJcbiAgXCIyMDE2LTA3LTI1IDE2OjM0OjUwLDE3N1wiO1wiVGVtcGVyYXR1cmVfQ3Vpc2luZVwiO1wiMjYuNDZcIlxuICBcIjIwMTYtMDctMjUgMTY6Mzk6NTAsMTI4XCI7XCJUZW1wZXJhdHVyZV9DdWlzaW5lXCI7XCIyNi41XCJcbiAgXCIyMDE2LTA3LTI1IDE2OjQ0OjUwLDA2NVwiO1wiVGVtcGVyYXR1cmVfQ3Vpc2luZVwiO1wiMjYuNTJcIlxuICBcIjIwMTYtMDctMjUgMTU6NDc6MTksNDIzXCI7XCJUZW1wZXJhdHVyZV9TYWxvblwiO1wiMjYuMzRcIlxuICBcIjIwMTYtMDctMjUgMTU6NDg6MDUsMjY0XCI7XCJUZW1wZXJhdHVyZV9TYWxvblwiO1wiMjYuMzhcIlxuICBcIjIwMTYtMDctMjUgMTU6NTM6MDUsMjc1XCI7XCJUZW1wZXJhdHVyZV9TYWxvblwiO1wiMjYuMzZcIlxuICBcIjIwMTYtMDctMjUgMTU6NTg6MDUsMjUyXCI7XCJUZW1wZXJhdHVyZV9TYWxvblwiO1wiMjYuMzRcIlxuICBcIjIwMTYtMDctMjUgMTY6MDg6MDUsMjM0XCI7XCJUZW1wZXJhdHVyZV9TYWxvblwiO1wiMjYuMzJcIlxuICBcIjIwMTYtMDctMjUgMTY6MTM6MDUsMjM3XCI7XCJUZW1wZXJhdHVyZV9TYWxvblwiO1wiMjYuMjhcIlxuICBcIjIwMTYtMDctMjUgMTY6MjM6MDUsMTcyXCI7XCJUZW1wZXJhdHVyZV9TYWxvblwiO1wiMjYuMjJcIlxuICBcIjIwMTYtMDctMjUgMTY6Mjg6MDUsMjQ0XCI7XCJUZW1wZXJhdHVyZV9TYWxvblwiO1wiMjYuMTZcIlxuICBcIjIwMTYtMDctMjUgMTY6Mjk6NTUsNDkwXCI7XCJUZW1wZXJhdHVyZV9TYWxvblwiO1wiMjYuMTRcIlxuICBcIjIwMTYtMDctMjUgMTU6NDc6MTksNDIzXCI7XCJQQzNcIjtcIk9OXCJcbiAgXCIyMDE2LTA3LTI1IDE1OjQ4OjIwLDI3OVwiO1wiUEMzXCI7XCJPRkZcIlxuICBcIjIwMTYtMDctMjUgMTU6NTA6MDAsNzc2XCI7XCJQQzNcIjtcIk9OXCJcbiAgXCIyMDE2LTA3LTI1IDE1OjU1OjAwLDI3NVwiO1wiUEMzXCI7XCJPRkZcIlxuICBcIjIwMTYtMDctMjUgMTY6MTA6MDAsMjAyXCI7XCJQQzNcIjtcIk9OXCJcbiAgXCIyMDE2LTA3LTI1IDE2OjE1OjAwLDE5N1wiO1wiUEMzXCI7XCJPRkZcIlxuICBcIjIwMTYtMDctMjUgMTY6MjQ6NTAsNDkzXCI7XCJQQzNcIjtcIk9OXCJcbiAgXCIyMDE2LTA3LTI1IDE2OjI5OjUwLDIwNFwiO1wiUEMzXCI7XCJPRkZcIlxuICBcIjIwMTYtMDctMjUgMTY6MzQ6NTAsMTc3XCI7XCJQQzNcIjtcIk9OXCJcbiAgXCIyMDE2LTA3LTI1IDE2OjM5OjUwLDEyOFwiO1wiUEMzXCI7XCJPRkZcIlxuICBcIjIwMTYtMDctMjUgMTY6NDQ6NTAsMDY1XCI7XCJQQzNcIjtcIk9OXCJcbiAgYDtcblxuICBwdWJsaWMgZGF0YUV4YW1wbGUxOiBEYXRhW10gPSBbXTsgXG4gIHB1YmxpYyBkYXRhRXhhbXBsZTI6IERhdGFbXSA9IFtdO1xuICBwdWJsaWMgZGF0YUV4YW1wbGUzOiBEYXRhW10gPSBbXTtcbiAgcHVibGljIGRhdGFFeGFtcGxlNDogRGF0YVtdID0gW107XG4gIHB1YmxpYyBkYXRhRXhhbXBsZTU6IERhdGFbXSA9IFtdO1xuICBwdWJsaWMgZGF0YUV4YW1wbGU2OiBEYXRhW10gPSBbXTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmdlbmVyYXRlRXhhbXBsZSh0aGlzLnN0cik7XG4gIH1cblxuICBwcml2YXRlIHBhcnNlPFQ+KHN0cjogc3RyaW5nLCBzZW5zb3JJZDogc3RyaW5nLCBmOiAoczogc3RyaW5nKSA9PiBUKTogREFUQTxUPltdIHtcblxuICAgIGNvbnN0IEw6IERBVEEgPCBUID4gW10gPSBzdHIudHJpbSgpLnNwbGl0KFwiXFxuXCIpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIocyA9PiBzIT09XCJcIilcblxuICAgICAgICAgICAgICAgICAubWFwKCBzID0+IHMuc3BsaXQoXCI7XCIpLm1hcCggcyA9PiBzLnNsaWNlKDEsIC0xKSApIClcblxuICAgICAgICAgICAgICAgICAuZmlsdGVyKCB0YWIgPT4gdGFiWzFdID09PSBzZW5zb3JJZCApXG5cbiAgICAgICAgICAgICAgICAgLm1hcCggKFt0LCBpZCwgdl0pID0+ICh7XG5cbiAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogKG5ldyBEYXRlKCh0LnJlcGxhY2UoXCIsXCIsIFwiLlwiKSkpLmdldFRpbWUoKSksXG5cbiAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmKHYpLFxuXG4gICAgICAgICAgICAgICAgICAgICBzZW5zb3JJZDogaWRcblxuICAgICAgICAgICAgICAgICB9KSk7XG4gICAgcmV0dXJuIEw7XG5cbiAgfVxuXG4gIHB1YmxpYyBnZW5lcmF0ZURhdGEoc3RyOnN0cmluZywgbGFiZWw6c3RyaW5nLCBjb2xvcjpzdHJpbmcsIHN0eWxlOiBcImJvdGhcInxcImxpbmVcInxcImFyZWFcIixpbnRlcnBvbGF0aW9uOiBcInN0ZXBcInxcImxpbmVhclwiLCBmOiAoczpzdHJpbmcpPT5udW1iZXIpOkRhdGF7XG4gICAgbGV0IGQ6IERBVEE8bnVtYmVyPltdID0gdGhpcy5wYXJzZTxudW1iZXI+KHN0cixsYWJlbCwgZik7XG4gICAgbGV0IHY6IFtudW1iZXIsbnVtYmVyXVtdID0gW107XG4gICAgZC5mb3JFYWNoKGVsZW1lbnQgPT52LnB1c2goW2VsZW1lbnQudGltZXN0YW1wLGVsZW1lbnQudmFsdWVdKSk7XG4gICAgbGV0IGRhOiBEYXRhID0ge1xuICAgICAgbGFiZWw6IGxhYmVsLFxuICAgICAgdmFsdWVzOiB2LFxuICAgICAgY29sb3I6IGNvbG9yLFxuICAgICAgc3R5bGU6IHN0eWxlLFxuICAgICAgaW50ZXJwb2xhdGlvbjogaW50ZXJwb2xhdGlvblxuICAgIH1cbiAgICByZXR1cm4gZGE7XG4gIH1cblxuICBwdWJsaWMgcGFyc2VCb29sKHM6IHN0cmluZyk6bnVtYmVyIHtcbiAgICBpZihzPT0nT04nKSByZXR1cm4gMTtcbiAgICBlbHNlIGlmIChzPT0nT0ZGJykgcmV0dXJuIDA7XG4gICAgZWxzZSByZXR1cm4gLTE7XG4gIH1cblxuICBwcml2YXRlIGdlbmVyYXRlRXhhbXBsZShzdHI6c3RyaW5nKXtcbiAgICBsZXQgZDI6IERBVEE8bnVtYmVyPltdID0gdGhpcy5wYXJzZTxudW1iZXI+KHN0cixcIlBDNVwiLCB0aGlzLnBhcnNlQm9vbCk7XG4gICAgbGV0IHYyOiBbbnVtYmVyLG51bWJlcl1bXSA9IFtdO1xuICAgIGQyLmZvckVhY2goZWxlbWVudCA9PnYyLnB1c2goW2VsZW1lbnQudGltZXN0YW1wLGVsZW1lbnQudmFsdWVdKSk7XG4gICAgbGV0IHg6bnVtYmVyID0gMDtcbiAgICB2Mi5mb3JFYWNoKGVsZW1lbnQ9PiB7XG4gICAgICBlbGVtZW50WzFdPXg7XG4gICAgICB4PXRoaXMuZ2V0UmFuZG9tSW50KHgpO1xuICAgIH1cbiAgICAgICk7XG4gICAgbGV0IGRhMjogRGF0YSA9IHtcbiAgICAgIGxhYmVsOiBcIlBDNFwiLFxuICAgICAgdmFsdWVzOiB2MixcbiAgICAgIGNvbG9yOiBcInB1cnBsZVwiLFxuICAgICAgc3R5bGU6IFwibGluZVwiLFxuICAgICAgaW50ZXJwb2xhdGlvbjogXCJsaW5lYXJcIlxuICAgIH1cbiAgICBcbiAgICB0aGlzLmRhdGFFeGFtcGxlMi5wdXNoKHRoaXMuZ2VuZXJhdGVEYXRhKHN0cixcIlBDNlwiLFwiIzEyNDU2OFwiLFwiYm90aFwiLCBcInN0ZXBcIix0aGlzLnBhcnNlQm9vbCkpO1xuICAgIHRoaXMuZGF0YUV4YW1wbGUxLnB1c2goZGEyKTtcbiAgICB0aGlzLmRhdGFFeGFtcGxlNC5wdXNoKHRoaXMuZ2VuZXJhdGVEYXRhKHN0cixcIlRlbXBlcmF0dXJlX1NhbG9uXCIsIFwicHVycGxlXCIsIFwibGluZVwiLCBcImxpbmVhclwiLCBwYXJzZUZsb2F0KSk7XG4gICAgdGhpcy5kYXRhRXhhbXBsZTMucHVzaCh0aGlzLmdlbmVyYXRlRGF0YShzdHIsXCJQQzVcIiwgXCJwaW5rXCIsIFwibGluZVwiLCBcInN0ZXBcIiwgdGhpcy5wYXJzZUJvb2wpKTtcbiAgICB0aGlzLmRhdGFFeGFtcGxlMy5wdXNoKHRoaXMuZ2VuZXJhdGVEYXRhKHN0cixcIlBDNlwiLFwiIzEyNDU2OFwiLFwiYm90aFwiLCBcInN0ZXBcIix0aGlzLnBhcnNlQm9vbCkpO1xuICAgIHRoaXMuZGF0YUV4YW1wbGU1LnB1c2godGhpcy5nZW5lcmF0ZURhdGEoc3RyLFwiVGVtcGVyYXR1cmVfQ3Vpc2luZVwiLCBcImdvbGRcIiwgXCJsaW5lXCIsIFwic3RlcFwiLCBwYXJzZUZsb2F0KSk7XG4gICAgdGhpcy5kYXRhRXhhbXBsZTYucHVzaCh0aGlzLmdlbmVyYXRlRGF0YShzdHIsXCJQQzNcIixcImdyZWVuXCIsXCJib3RoXCIsIFwic3RlcFwiLHRoaXMucGFyc2VCb29sKSk7XG4gIH1cblxuICBwcml2YXRlIGdldFJhbmRvbUludCh4Om51bWJlcil7XG4gICAgbGV0IGFsZWE6IG51bWJlcjtcbiAgICBpZih4PT0wKXtcbiAgICAgIHJldHVybiAxO1xuICAgIH1lbHNle1xuICAgICAgYWxlYT1NYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpO1xuICAgICAgaWYoYWxlYT09MCl7XG4gICAgICAgIHJldHVybiB4LTE7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgcmV0dXJuIHgrMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ==