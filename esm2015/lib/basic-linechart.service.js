import { Injectable } from '@angular/core';
import { str } from '../data';
import * as i0 from "@angular/core";
export class DataService {
    constructor() {
        this.str = str;
        this.dataExample1 = [];
        this.dataExample2 = [];
        this.dataExample3 = [];
        this.dataExample4 = [];
        this.dataExample5 = [];
        this.dataExample6 = [];
        this.dataExample7 = [];
        this.generateExample();
    }
    parse(str, sensorId, f) {
        const L = str.trim().split("\n").map(s => s.trim()).filter(s => s !== "")
            .map(s => s.split(";").map(s => s.slice(1, -1)))
            .filter(tab => tab[1] === sensorId)
            .map(([t, id, v]) => ({
            timestamp: (new Date((t.replace(",", "."))).getTime()),
            value: f(v),
            sensorId: id
        }));
        return L;
    }
    generateData(label, color, style, interpolation, f) {
        let d = this.parse(this.str, label, f);
        let v = [];
        d.forEach(element => v.push([element.timestamp, element.value]));
        let da = {
            label: label,
            values: v,
            color: color,
            style: style,
            interpolation: interpolation
        };
        return da;
    }
    parseBool(s) {
        if (s == 'ON')
            return 1;
        else if (s == 'OFF')
            return 0;
        else
            return -1;
    }
    generateExample() {
        let d2 = this.parse(this.str, "PC5", this.parseBool);
        let v2 = [];
        d2.forEach(element => v2.push([element.timestamp, element.value]));
        let x = 0;
        v2.forEach(element => {
            element[1] = x;
            x = this.getRandomInt(x);
        });
        let da2 = {
            label: "PC5",
            values: v2,
            color: "purple",
            style: "line",
            interpolation: "linear"
        };
        this.dataExample2.push(this.generateData("PC6", "#124568", "both", "step", this.parseBool));
        this.dataExample1.push(da2);
        this.dataExample4.push(this.generateData("Temperature_Salon", "purple", "line", "linear", parseFloat));
        this.dataExample3.push(this.generateData("Presence_Salon", "pink", "line", "step", this.parseBool));
        this.dataExample3.push(this.generateData("PC6", "#124568", "both", "step", this.parseBool));
        this.dataExample5.push(this.generateData("Temperature_Cuisine", "gold", "line", "step", parseFloat));
        this.dataExample6.push(this.generateData("Presence_Cuisine", "purple", "both", "step", this.parseBool));
        this.dataExample7.push(this.generateData("Presence_SDB", "black", "area", "step", this.parseBool));
    }
    getRandomInt(x) {
        let alea;
        if (x == 0) {
            return 1;
        }
        else {
            alea = Math.round(Math.random());
            if (alea == 0) {
                return x - 1;
            }
            else {
                return x + 1;
            }
        }
    }
}
DataService.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "12.0.3", ngImport: i0, type: DataService, deps: [], target: i0.ɵɵFactoryTarget.Injectable });
DataService.ɵprov = i0.ɵɵngDeclareInjectable({ minVersion: "12.0.0", version: "12.0.3", ngImport: i0, type: DataService, providedIn: 'root' });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "12.0.3", ngImport: i0, type: DataService, decorators: [{
            type: Injectable,
            args: [{
                    providedIn: 'root'
                }]
        }], ctorParameters: function () { return []; } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYmFzaWMtbGluZWNoYXJ0LnNlcnZpY2UuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9iYXNpYy1saW5lY2hhcnQvc3JjL2xpYi9iYXNpYy1saW5lY2hhcnQuc2VydmljZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRTNDLE9BQU8sRUFBQyxHQUFHLEVBQUMsTUFBTSxTQUFTLENBQUM7O0FBYTVCLE1BQU0sT0FBTyxXQUFXO0lBWXRCO1FBVlEsUUFBRyxHQUFXLEdBQUcsQ0FBQztRQUVuQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUMxQixpQkFBWSxHQUFXLEVBQUUsQ0FBQztRQUcvQixJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7SUFDekIsQ0FBQztJQUVPLEtBQUssQ0FBSSxHQUFXLEVBQUUsUUFBZ0IsRUFBRSxDQUFtQjtRQUVqRSxNQUFNLENBQUMsR0FBa0IsR0FBRyxDQUFDLElBQUksRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUcsRUFBRSxDQUFDO2FBRXhFLEdBQUcsQ0FBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxD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QUUsQ0FBQyxFQUFDO2dCQUNULE9BQU8sQ0FBQyxHQUFDLENBQUMsQ0FBQzthQUNaO2lCQUFJO2dCQUNILE9BQU8sQ0FBQyxHQUFDLENBQUMsQ0FBQzthQUNaO1NBQ0Y7SUFDSCxDQUFDOzt3R0FqR1UsV0FBVzs0R0FBWCxXQUFXLGNBSFYsTUFBTTsyRkFHUCxXQUFXO2tCQUp2QixVQUFVO21CQUFDO29CQUNWLFVBQVUsRUFBRSxNQUFNO2lCQUNuQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERhdGEgfSBmcm9tICcuL2Jhc2ljLWxpbmVjaGFydC5jb21wb25lbnQnO1xuaW1wb3J0IHtzdHJ9IGZyb20gJy4uL2RhdGEnO1xuXG5cbmludGVyZmFjZSBEQVRBPFQ+e1xuICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgdmFsdWU6IFQ7XG4gIHNlbnNvcklkOiBzdHJpbmc7XG59XG5cbkBJbmplY3RhYmxlKHtcbiAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuXG5leHBvcnQgY2xhc3MgRGF0YVNlcnZpY2Uge1xuXG4gIHByaXZhdGUgc3RyOiBzdHJpbmcgPSBzdHI7XG5cbiAgcHVibGljIGRhdGFFeGFtcGxlMTogRGF0YVtdID0gW107IFxuICBwdWJsaWMgZGF0YUV4YW1wbGUyOiBEYXRhW10gPSBbXTtcbiAgcHVibGljIGRhdGFFeGFtcGxlMzogRGF0YVtdID0gW107XG4gIHB1YmxpYyBkYXRhRXhhbXBsZTQ6IERhdGFbXSA9IFtdO1xuICBwdWJsaWMgZGF0YUV4YW1wbGU1OiBEYXRhW10gPSBbXTtcbiAgcHVibGljIGRhdGFFeGFtcGxlNjogRGF0YVtdID0gW107XG4gIHB1YmxpYyBkYXRhRXhhbXBsZTc6IERhdGFbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuZ2VuZXJhdGVFeGFtcGxlKCk7XG4gIH1cblxuICBwcml2YXRlIHBhcnNlPFQ+KHN0cjogc3RyaW5nLCBzZW5zb3JJZDogc3RyaW5nLCBmOiAoczogc3RyaW5nKSA9PiBUKTogREFUQTxUPltdIHtcblxuICAgIGNvbnN0IEw6IERBVEEgPCBUID4gW10gPSBzdHIudHJpbSgpLnNwbGl0KFwiXFxuXCIpLm1hcChzID0+IHMudHJpbSgpKS5maWx0ZXIocyA9PiBzIT09XCJcIilcblxuICAgICAgICAgICAgICAgICAubWFwKCBzID0+IHMuc3BsaXQoXCI7XCIpLm1hcCggcyA9PiBzLnNsaWNlKDEsIC0xKSApIClcblxuICAgICAgICAgICAgICAgICAuZmlsdGVyKCB0YWIgPT4gdGFiWzFdID09PSBzZW5zb3JJZCApXG5cbiAgICAgICAgICAgICAgICAgLm1hcCggKFt0LCBpZCwgdl0pID0+ICh7XG5cbiAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogKG5ldyBEYXRlKCh0LnJlcGxhY2UoXCIsXCIsIFwiLlwiKSkpLmdldFRpbWUoKSksXG5cbiAgICAgICAgICAgICAgICAgICAgIHZhbHVlOiBmKHYpLFxuXG4gICAgICAgICAgICAgICAgICAgICBzZW5zb3JJZDogaWRcblxuICAgICAgICAgICAgICAgICB9KSk7XG4gICAgcmV0dXJuIEw7XG5cbiAgfVxuXG4gIHB1YmxpYyBnZW5lcmF0ZURhdGEobGFiZWw6c3RyaW5nLCBjb2xvcjpzdHJpbmcsIHN0eWxlOiBcImJvdGhcInxcImxpbmVcInxcImFyZWFcIixpbnRlcnBvbGF0aW9uOiBcInN0ZXBcInxcImxpbmVhclwiLCBmOiAoczpzdHJpbmcpPT5udW1iZXIpOkRhdGF7XG4gICAgbGV0IGQ6IERBVEE8bnVtYmVyPltdID0gdGhpcy5wYXJzZTxudW1iZXI+KHRoaXMuc3RyLGxhYmVsLCBmKTtcbiAgICBsZXQgdjogW251bWJlcixudW1iZXJdW10gPSBbXTtcbiAgICBkLmZvckVhY2goZWxlbWVudCA9PnYucHVzaChbZWxlbWVudC50aW1lc3RhbXAsZWxlbWVudC52YWx1ZV0pKTtcbiAgICBsZXQgZGE6IERhdGEgPSB7XG4gICAgICBsYWJlbDogbGFiZWwsXG4gICAgICB2YWx1ZXM6IHYsXG4gICAgICBjb2xvcjogY29sb3IsXG4gICAgICBzdHlsZTogc3R5bGUsXG4gICAgICBpbnRlcnBvbGF0aW9uOiBpbnRlcnBvbGF0aW9uXG4gICAgfVxuICAgIHJldHVybiBkYTtcbiAgfVxuXG4gIHB1YmxpYyBwYXJzZUJvb2woczogc3RyaW5nKTpudW1iZXIge1xuICAgIGlmKHM9PSdPTicpIHJldHVybiAxO1xuICAgIGVsc2UgaWYgKHM9PSdPRkYnKSByZXR1cm4gMDtcbiAgICBlbHNlIHJldHVybiAtMTtcbiAgfVxuXG4gIHByaXZhdGUgZ2VuZXJhdGVFeGFtcGxlKCl7XG4gICAgbGV0IGQyOiBEQVRBPG51bWJlcj5bXSA9IHRoaXMucGFyc2U8bnVtYmVyPih0aGlzLnN0cixcIlBDNVwiLCB0aGlzLnBhcnNlQm9vbCk7XG4gICAgbGV0IHYyOiBbbnVtYmVyLG51bWJlcl1bXSA9IFtdO1xuICAgIGQyLmZvckVhY2goZWxlbWVudCA9PnYyLnB1c2goW2VsZW1lbnQudGltZXN0YW1wLGVsZW1lbnQudmFsdWVdKSk7XG4gICAgbGV0IHg6bnVtYmVyID0gMDtcbiAgICB2Mi5mb3JFYWNoKGVsZW1lbnQ9PiB7XG4gICAgICBlbGVtZW50WzFdPXg7XG4gICAgICB4PXRoaXMuZ2V0UmFuZG9tSW50KHgpO1xuICAgIH1cbiAgICAgICk7XG4gICAgbGV0IGRhMjogRGF0YSA9IHtcbiAgICAgIGxhYmVsOiBcIlBDNVwiLFxuICAgICAgdmFsdWVzOiB2MixcbiAgICAgIGNvbG9yOiBcInB1cnBsZVwiLFxuICAgICAgc3R5bGU6IFwibGluZVwiLFxuICAgICAgaW50ZXJwb2xhdGlvbjogXCJsaW5lYXJcIlxuICAgIH1cbiAgICBcbiAgICB0aGlzLmRhdGFFeGFtcGxlMi5wdXNoKHRoaXMuZ2VuZXJhdGVEYXRhKFwiUEM2XCIsXCIjMTI0NTY4XCIsXCJib3RoXCIsIFwic3RlcFwiLHRoaXMucGFyc2VCb29sKSk7XG4gICAgdGhpcy5kYXRhRXhhbXBsZTEucHVzaChkYTIpO1xuICAgIHRoaXMuZGF0YUV4YW1wbGU0LnB1c2godGhpcy5nZW5lcmF0ZURhdGEoXCJUZW1wZXJhdHVyZV9TYWxvblwiLCBcInB1cnBsZVwiLCBcImxpbmVcIiwgXCJsaW5lYXJcIiwgcGFyc2VGbG9hdCkpO1xuICAgIHRoaXMuZGF0YUV4YW1wbGUzLnB1c2godGhpcy5nZW5lcmF0ZURhdGEoXCJQcmVzZW5jZV9TYWxvblwiLCBcInBpbmtcIiwgXCJsaW5lXCIsIFwic3RlcFwiLCB0aGlzLnBhcnNlQm9vbCkpO1xuICAgIHRoaXMuZGF0YUV4YW1wbGUzLnB1c2godGhpcy5nZW5lcmF0ZURhdGEoXCJQQzZcIixcIiMxMjQ1NjhcIixcImJvdGhcIiwgXCJzdGVwXCIsdGhpcy5wYXJzZUJvb2wpKTtcbiAgICB0aGlzLmRhdGFFeGFtcGxlNS5wdXNoKHRoaXMuZ2VuZXJhdGVEYXRhKFwiVGVtcGVyYXR1cmVfQ3Vpc2luZVwiLCBcImdvbGRcIiwgXCJsaW5lXCIsIFwic3RlcFwiLCBwYXJzZUZsb2F0KSk7XG4gICAgdGhpcy5kYXRhRXhhbXBsZTYucHVzaCh0aGlzLmdlbmVyYXRlRGF0YShcIlByZXNlbmNlX0N1aXNpbmVcIiwgXCJwdXJwbGVcIiwgXCJib3RoXCIsIFwic3RlcFwiLCB0aGlzLnBhcnNlQm9vbCkpO1xuICAgIHRoaXMuZGF0YUV4YW1wbGU3LnB1c2godGhpcy5nZW5lcmF0ZURhdGEoXCJQcmVzZW5jZV9TREJcIiwgXCJibGFja1wiLCBcImFyZWFcIiwgXCJzdGVwXCIsIHRoaXMucGFyc2VCb29sKSk7XG4gIH1cblxuICBwcml2YXRlIGdldFJhbmRvbUludCh4Om51bWJlcil7XG4gICAgbGV0IGFsZWE6IG51bWJlcjtcbiAgICBpZih4PT0wKXtcbiAgICAgIHJldHVybiAxO1xuICAgIH1lbHNle1xuICAgICAgYWxlYT1NYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkpO1xuICAgICAgaWYoYWxlYT09MCl7XG4gICAgICAgIHJldHVybiB4LTE7XG4gICAgICB9ZWxzZXtcbiAgICAgICAgcmV0dXJuIHgrMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ==